<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search -Tryvels</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/saved.css">

</head>
<body class="search-page">
  <div class="app-container">
    <!-- Status Bar -->
    <div class="status-bar">
      <span class="status-time">9:41</span>
      <div class="status-icons">
        <span class="status-signal"></span>
        <span class="status-wifi"></span>
        <span class="status-battery"></span>
      </div>
    </div>

    
    <!-- Search Header -->
    <div class="search-hero">
      <div class="search-header">
        <button class="back-btn" aria-label="Back" onclick="window.location.href='home.html'">
          <svg class="icon-large" viewBox="0 0 24 24">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
        </button>
        <div class="search-input-container">
          <svg class="search-icon icon-medium" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
          </svg>
          <input type="text" 
                 class="search-input" 
                 id="searchInput" 
                 placeholder="What would you like to go?"
                 minlength="2"
                 maxlength="50"
                 pattern="[A-Za-z0-9\s\-]+"
                 required>
          <div class="validation-status" id="validationStatus" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);">
            <svg class="valid-icon" style="display: none; width: 20px; height: 20px;" viewBox="0 0 24 24">
              <path fill="#4CAF50" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
            </svg>
            <svg class="invalid-icon" style="display: none; width: 20px; height: 20px;" viewBox="0 0 24 24">
              <path fill="#ff4444" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>
            </svg>
          </div>
          <div class="error-message" id="searchError" style="display: none; color: #ff4444; font-size: 0.8rem; margin-top: 4px; position: absolute; left: 0; right: 0;"></div>
        </div>
      </div>

      <!-- Filter Options -->
      <div class="filter-options">
       
    </div>

    <!-- Search Content -->
    <div class="search-content">
      <!-- Categories Section -->
      <div class="detail-section">
        <div class="section-header">
          <h2>Categories</h2>
        </div>
        <div class="categories-grid">
          <div class="category-item" onclick="filterByCategory('Beach')" style="cursor: pointer; transition: transform 0.2s;">
            <div class="category-icon beach" style="background: #2a2a2a; padding: 16px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
              <svg class="icon-large" viewBox="0 0 24 24" style="color: #fff;">
                <path d="M18 17a7 7 0 0 0-14 0"/>
                <path d="M18 17H4M22 17h-4M12 9v4M8 13v-2M16 13v-2M12 3v2"/>
              </svg>
            </div>
            <span style="margin-top: 8px; font-weight: 500;">Beach</span>
          </div>
          <div class="category-item" onclick="filterByCategory('Mountain')" style="cursor: pointer; transition: transform 0.2s;">
            <div class="category-icon mountain" style="background: #2a2a2a; padding: 16px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
              <svg class="icon-large" viewBox="0 0 24 24" style="color: #fff;">
                <path d="M8 3l4 8 5-5 5 15H2L8 3z"/>
              </svg>
            </div>
            <span style="margin-top: 8px; font-weight: 500;">Mountain</span>
          </div>
          <div class="category-item" onclick="filterByCategory('Food')" style="cursor: pointer; transition: transform 0.2s;">
            <div class="category-icon restaurant" style="background: #2a2a2a; padding: 16px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
              <svg class="icon-large" viewBox="0 0 24 24" style="color: #fff;">
                <path d="M7 10h10M9 14h6M9 18h6M6.5 6C5.672 6 5 6.672 5 7.5S5.672 9 6.5 9 8 8.328 8 7.5 7.328 6 6.5 6zM17.5 6c-.828 0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5S19 8.328 19 7.5 18.328 6 17.5 6z"/>
                <rect x="3" y="3" width="18" height="18" rx="2"/>
              </svg>
            </div>
            <span style="margin-top: 8px; font-weight: 500;">Food</span>
          </div>
          <div class="category-item" onclick="filterByCategory('Park')" style="cursor: pointer; transition: transform 0.2s;">
            <div class="category-icon park" style="background: #2a2a2a; padding: 16px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
              <svg class="icon-large" viewBox="0 0 24 24" style="color: #fff;">
                <path d="M12 22v-8m0 0V7m0 7H7m5 0h5"/>
                <path d="M16 5l-4-2-4 2M16 5v3c0 1.1.9 2 2 2h0M16 5l-4 2-4-2M4 11h0c1.1 0 2-1 2-2V6"/>
                <path d="M20 22v-4a2 2 0 1 0-4 0v4M4 22v-4a2 2 0 1 1 4 0v4"/>
              </svg>
            </div>
            <span style="margin-top: 8px; font-weight: 500;">Park</span>
          </div>
        </div>
      </div>

      <!-- Search Results Section -->
      <div class="detail-section">
        <div class="section-header">
          <h2>Search Results</h2>
        </div>
        <div class="search-results">
          <!-- Results will be populated dynamically -->
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-btn" aria-label="Home" onclick="window.location.href='home.html'">
        <svg class="icon-xlarge" viewBox="0 0 24 24">
          <path d="M3 12L12 3l9 9"/>
          <path d="M9 21V9h6v12"/>
        </svg>
        <span class="nav-label">Home</span>
      </button>
      <button class="nav-btn active" aria-label="Search">
        <svg class="icon-xlarge" viewBox="0 0 24 24">
          <circle cx="11" cy="11" r="8"/>
          <path d="M21 21l-4.35-4.35"/>
        </svg>
        <span class="nav-label">Search</span>
      </button>
      <button class="nav-btn" aria-label="Bookmark" onclick="window.location.href='saved.html'">
        <svg class="icon-xlarge" viewBox="0 0 24 24">
          <path d="M6 4a2 2 0 0 0-2 2v14l8-5.333L20 20V6a2 2 0 0 0-2-2H6z"/>
        </svg>
        <span class="nav-label">Saved</span>
      </button>
      <button class="nav-btn" aria-label="Chat" onclick="window.location.href='chat.html'">
        <svg class="icon-xlarge" viewBox="0 0 24 24">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
        <span class="nav-label">Tryvel Support</span>
      </button>
      <button class="nav-btn" aria-label="Profile" onclick="window.location.href='profile.html'">
        <svg class="icon-xlarge" viewBox="0 0 24 24">
          <circle cx="12" cy="7" r="4"/>
          <path d="M5.5 21a8.38 8.38 0 0 1 13 0"/>
        </svg>
        <span class="nav-label">Profile</span>
      </button>
    </nav>
    <!-- END Bottom Navigation -->
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const searchInput = document.getElementById('searchInput');
      const searchResults = document.querySelector('.search-results');
      const searchError = document.getElementById('searchError');
      const validIcon = document.querySelector('.valid-icon');
      const invalidIcon = document.querySelector('.invalid-icon');
      
      // Validation rules
      const validationRules = {
        minLength: 2,
        maxLength: 50,
        pattern: /^[A-Za-z0-9\s\-]+$/
      };

      // Function to validate search input
      function validateSearchInput(value) {
        if (!value) {
          return {
            isValid: false,
            message: 'Please enter a search term'
          };
        }

        if (value.length < validationRules.minLength) {
          return {
            isValid: false,
            message: `Search term must be at least ${validationRules.minLength} characters`
          };
        }

        if (value.length > validationRules.maxLength) {
          return {
            isValid: false,
            message: `Search term cannot exceed ${validationRules.maxLength} characters`
          };
        }

        if (!validationRules.pattern.test(value)) {
          return {
            isValid: false,
            message: 'Search term can only contain letters, numbers, spaces, and hyphens'
          };
        }

        return {
          isValid: true,
          message: ''
        };
      }

      // Function to show validation status
      function updateValidationStatus(isValid, message = '') {
        if (isValid) {
          validIcon.style.display = 'block';
          invalidIcon.style.display = 'none';
          searchInput.style.borderColor = '#4CAF50';
          searchError.style.display = 'none';
        } else {
          validIcon.style.display = 'none';
          invalidIcon.style.display = 'block';
          searchInput.style.borderColor = '#ff4444';
          if (message) {
            searchError.textContent = message;
            searchError.style.display = 'block';
          }
        }
      }

      // Function to handle search
      function handleSearch() {
        const searchTerm = searchInput.value.trim();
        const validation = validateSearchInput(searchTerm);
        
        updateValidationStatus(validation.isValid, validation.message);

        if (!validation.isValid) {
          searchResults.innerHTML = '';
          return;
        }

        const filteredPlaces = places.filter(place => 
          place.name.toLowerCase().includes(searchTerm.toLowerCase()) || 
          place.category.toLowerCase().includes(searchTerm.toLowerCase())
        );

        searchResults.innerHTML = filteredPlaces.length > 0 
          ? filteredPlaces.map(place => createResultCard(place)).join('')
          : '<p class="no-results">No results found</p>';
      }

      // Function to filter by category
      window.filterByCategory = function(category) {
        const validation = validateSearchInput(searchInput.value.trim());
        updateValidationStatus(validation.isValid, validation.message);
        
        const filteredPlaces = places.filter(place => place.category === category);
        searchResults.innerHTML = filteredPlaces.length > 0 
          ? filteredPlaces.map(place => createResultCard(place)).join('')
          : '<p class="no-results">No places found in this category</p>';
        
        // Add active state to selected category
        document.querySelectorAll('.category-item').forEach(item => {
          if (item.querySelector('span').textContent === category) {
            item.style.transform = 'scale(1.05)';
            item.querySelector('.category-icon').style.background = '#4a4a4a';
          } else {
            item.style.transform = 'scale(1)';
            item.querySelector('.category-icon').style.background = '#2a2a2a';
          }
        });
      };

      // Add event listeners for real-time validation
      searchInput.addEventListener('input', function() {
        const value = this.value.trim();
        if (value) {
          handleSearch();
        } else {
          updateValidationStatus(false, 'Please enter a search term');
          searchResults.innerHTML = '';
        }
      });

      searchInput.addEventListener('focus', function() {
        const value = this.value.trim();
        if (value) {
          const validation = validateSearchInput(value);
          updateValidationStatus(validation.isValid, validation.message);
        }
      });

      // Initial validation state
      updateValidationStatus(false, 'Please enter a search term');
    });
  </script>

  <script src="../js/navigation.js"></script>
</body>
</html> 